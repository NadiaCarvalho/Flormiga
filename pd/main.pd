#N canvas 700 113 632 562 10;
#X declare -path abstracts;
#X declare -path parts;
#X declare -path cyclone;
#X declare -lib rtc-lib;
#X obj 398 269 leaves;
#X obj 442 269 flower;
#X obj 358 236 rewards;
#N canvas 540 109 495 378 duration 0;
#X floatatom 36 196 5 0 0 0 - - -;
#X obj 83 194 > 31;
#X obj 83 224 sel 1;
#X msg 83 268 2000;
#X msg 127 268 1000;
#X obj 83 306 s growth_chance;
#X msg 27 13 30;
#X msg 38 36 60;
#X msg 63 11 90;
#X text 115 3 duração da experiência em dias (acelera ou desacelera
a evolução da flormiga);
#X obj 64 143 loadbang;
#X msg 64 164 31;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 6 0 0 0;
#X connect 7 0 0 0;
#X connect 8 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X restore 415 68 pd duration;
#N canvas 72 29 1280 747 states 0;
#X obj 538 103 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 395 186 s serial_cap_mean;
#X obj 177 68 r serial_cap;
#X floatatom 177 166 5 0 0 0 - - -;
#X obj 336 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 354 102 clear;
#X obj 395 142 list-abs/list-extend;
#X obj 395 164 list-abs/list-mean;
#X obj 177 348 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 276 348 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 177 369 s serial_moist;
#X obj 276 369 s serial_dry;
#X obj 23 306 s serial_cap_short_mean;
#X floatatom 429 348 5 0 0 0 - - -;
#X obj 429 369 s serial_moist_value;
#X text 273 25 - MOISTURE STATE -;
#X obj 1124 106 r dia;
#X obj 1124 134 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 538 81 r dia;
#X text 867 25 - SUNLIGHT STATE -;
#X obj 1007 157 list-abs/list-extend;
#X obj 1007 179 list-abs/list-mean;
#X obj 1007 201 s serial_light_mean;
#X obj 866 379 s serial_sunny;
#X obj 743 379 s serial_dark;
#X obj 743 304 sel 0 1 2, f 62;
#X obj 743 337 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 866 337 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 989 337 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 914 63 r serial_volt;
#X obj 1039 62 r reset;
#X obj 427 55 r reset;
#X obj 902 191 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 177 234 5 0 0 0 - - -;
#X floatatom 743 193 5 0 0 0 - - -;
#X floatatom 743 234 5 0 0 0 - - -;
#X obj 743 213 abstracts/mean-last-x-elems 100;
#X obj 429 304 expr if($f2>730 \, if(abs($f1-$f2)>100 \, $f2 \, 0)
\, 0);
#X obj 177 213 abstracts/hmean-last-x-elems 100;
#X obj 177 304 expr if($f1>=0 \, if($f1<=730 \, 1 \, 0) \, 0);
#X obj 177 326 sel 0, f 17;
#X obj 743 271 expr if($f1 <= 500 \, if($f1>=150 \, if($f1<150 \, 1
\, 2) \, 0) \, 0);
#X connect 0 0 6 1;
#X connect 2 0 3 0;
#X connect 2 0 6 0;
#X connect 3 0 37 1;
#X connect 3 0 38 0;
#X connect 4 0 38 1;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 13 0 14 0;
#X connect 16 0 17 0;
#X connect 17 0 20 1;
#X connect 18 0 0 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 25 0 26 0;
#X connect 25 1 27 0;
#X connect 25 2 28 0;
#X connect 26 0 24 0;
#X connect 27 0 23 0;
#X connect 28 0 23 0;
#X connect 29 0 34 0;
#X connect 29 0 20 0;
#X connect 30 0 17 0;
#X connect 30 0 32 0;
#X connect 31 0 0 0;
#X connect 31 0 4 0;
#X connect 32 0 36 1;
#X connect 33 0 12 0;
#X connect 33 0 37 0;
#X connect 33 0 39 0;
#X connect 34 0 36 0;
#X connect 35 0 41 0;
#X connect 36 0 35 0;
#X connect 37 0 13 0;
#X connect 38 0 33 0;
#X connect 39 0 40 0;
#X connect 40 0 8 0;
#X connect 40 1 9 0;
#X connect 41 0 25 0;
#X restore 357 216 pd states;
#N canvas 405 491 568 181 events 0;
#X obj 30 30 tickles;
#X obj 30 51 kiss;
#X obj 30 72 light_beam;
#X obj 30 93 whistle_back;
#X restore 418 216 pd events;
#X text 18 108 II. ON START (elementos activados quando o patch abre)
, f 42;
#N canvas 712 100 1024 672 RESET 0;
#N canvas 558 179 450 300 reset 0;
#X obj 24 23 inlet;
#X obj 24 197 s reset_freq_seed;
#X obj 169 197 s reset_personality;
#X obj 169 83 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 169 138 random 3;
#X obj 73 79 s day_0;
#X obj 45 137 s reset;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X restore 13 101 pd reset;
#X obj 13 56 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 13 32 sel 1;
#X obj 13 79 delay 10;
#X obj 13 11 r reset_but;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 2 0;
#X restore 357 68 pd RESET;
#N canvas 0 96 1024 672 ON 0;
#X obj 15 136 loadbang;
#X msg 15 159 \; pd dsp 1 \;;
#X obj 14 21 declare -path abstracts;
#X obj 14 43 declare -path parts;
#X obj 14 65 declare -path cyclone;
#X obj 14 87 declare -lib rtc-lib;
#X connect 0 0 1 0;
#X restore 357 108 pd ON START;
#X text 18 69 I. RESET (elementos que reiniciam a experiência), f
42;
#X text 18 148 III.ON EXIT (elementos que asseguram o fecho correcto)
;
#N canvas 485 146 488 200 SALVAR_ANTES_DE_SAIR 0;
#X obj 25 83 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 25 112 \; pd-flormiga_main.pd menusave \; pd-flower.pd menusave
\;;
#X obj 25 7 r ligar;
#X obj 25 28 sel 0;
#X text 205 12 falta receber aqui: 1)bateria a acabar;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X restore 356 146 pd SALVAR_ANTES_DE_SAIR;
#X text 20 185 IV. DATA (receptáculo de dados dos sensores \, etc.)
, f 42;
#N canvas 308 111 688 552 DATA 0;
#X obj 25 98 oscparse;
#X obj 25 74 netreceive -u -b 3001;
#X obj 25 121 list trim;
#X floatatom 25 392 5 0 0 0 - - -;
#X floatatom 88 347 5 0 0 0 - - -;
#X floatatom 216 270 5 0 0 0 - - -;
#X floatatom 280 228 5 0 0 0 - - -;
#X floatatom 344 204 5 0 0 0 - - -;
#X obj 88 368 s temp_val;
#X obj 280 250 s ligar;
#X text 22 23 -RECEPTÁCULO DE DADOS-;
#X text 25 453 Brightness -> valores mais baixos = mais luz Button
-> reset;
#X obj 25 153 route capacitance temperature brightness button switch
battery day, f 75;
#X text 486 153 confirmar este day no python;
#X floatatom 408 180 5 0 0 0 - - -;
#X obj 25 418 s serial_cap;
#X obj 408 304 s dia;
#X obj 152 278 sel 0;
#X floatatom 153 300 5 0 0 0 - - -;
#X obj 153 322 s serial_volt;
#X obj 215 292 s reset_but;
#X obj 408 202 change;
#X floatatom 408 225 5 0 0 0 - - -;
#X obj 464 225 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 12 0;
#X connect 3 0 15 0;
#X connect 4 0 8 0;
#X connect 5 0 20 0;
#X connect 6 0 9 0;
#X connect 12 0 3 0;
#X connect 12 1 4 0;
#X connect 12 2 17 0;
#X connect 12 3 5 0;
#X connect 12 4 6 0;
#X connect 12 5 7 0;
#X connect 12 6 14 0;
#X connect 14 0 21 0;
#X connect 17 1 18 0;
#X connect 18 0 19 0;
#X connect 21 0 22 0;
#X connect 21 0 23 0;
#X connect 22 0 16 0;
#X restore 356 183 pd DATA;
#X text 20 226 V. DATA PROCESSING (elementos que dão sentido aos dados)
, f 42;
#N canvas 196 158 314 101 personality 0;
#X obj 10 59 personality;
#X obj 10 38 hradio 15 1 0 3 empty empty empty 0 -8 0 10 -261234 -1
-1 0;
#X obj 10 13 r reset_personality;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X restore 408 236 pd personality;
#N canvas 16 165 873 412 master 0;
#X obj 189 357 dac~ 1;
#X obj 188 310 *~ 1;
#X obj 22 262 *~, f 10;
#X obj 188 73 *~, f 10;
#X obj 252 173 *~, f 10;
#X obj 79 218 r roots_envelope;
#X floatatom 79 239 5 0 0 0 - - -;
#X obj 245 33 r idle_envelope;
#X floatatom 245 54 5 0 0 0 - - -;
#X obj 309 128 r leaves_envelope;
#X floatatom 309 149 5 0 0 0 - - -;
#X obj 22 195 r~ roots_sound;
#X obj 252 106 r~ leaves_sound;
#X obj 188 12 r~ flower_sound;
#X obj 257 271 loadbang;
#X msg 257 294 1;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 3 1;
#X connect 9 0 10 0;
#X connect 10 0 4 1;
#X connect 11 0 2 0;
#X connect 12 0 4 0;
#X connect 13 0 3 0;
#X connect 14 0 15 0;
#X connect 15 0 1 1;
#X restore 360 290 pd master;
#X obj 360 269 roots;
#X text 22 274 VI. MUSIC (elementos de geração e controlo de som)
, f 42;
#X text 18 13 FLORMIGA PD PATCH <07.06.2022>;
